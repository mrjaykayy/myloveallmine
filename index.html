<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>For You ðŸ’Œ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&family=Pacifico&family=Baloo+2:wght@500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#e9f5ff;
      --bg2:#fff5fb;
      --cloud:#ffffff;
      --ink:#5c6a79;
      --accent:#7aaeff;
      --accent2:#ffb7d5;
      --shadow: rgba(0,0,0,.12);
      --glass: rgba(255,255,255,.6);
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;}
    body{
      font-family:'Quicksand', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color:var(--ink);
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    .sky{position:fixed; inset:0; overflow:hidden;}
    .cloud{position:absolute; background:var(--cloud); opacity:.9; filter: drop-shadow(0 6px 16px var(--shadow)); border-radius:50px}
    .cloud:before, .cloud:after{content:""; position:absolute; background:inherit; border-radius:inherit}
    .cloud.small{width:180px;height:70px; top:12%; left:-220px; animation: drift 40s linear infinite}
    .cloud.small:before{width:70px;height:70px; left:30px; top:-30px}
    .cloud.small:after{width:110px;height:90px; right:10px; top:-15px}
    .cloud.big{width:300px;height:100px; bottom:18%; left:-360px; animation: drift 60s linear infinite 10s}
    .cloud.big:before{width:100px;height:100px; left:40px; top:-40px}
    .cloud.big:after{width:150px;height:120px; right:20px; top:-20px}
    @keyframes drift{to{transform:translateX(140vw)}}

    .sparkle{position:absolute; width:8px; height:8px; border-radius:50%; background:var(--accent); opacity:.8; animation: floatUp 10s ease-in infinite; filter: blur(.2px)}
    .sparkle.heart{width:10px;height:10px; background:transparent}
    .sparkle.heart:before,.sparkle.heart:after{content:""; position:absolute; width:6px;height:9px; background:var(--accent2); border-radius:6px 6px 0 0; transform:rotate(-45deg); left:2px; top:3px}
    .sparkle.heart:after{left:0; transform:rotate(45deg)}
    @keyframes floatUp{0%{transform:translateY(10vh) scale(.7); opacity:0} 15%{opacity:.9} 100%{transform:translateY(-90vh) scale(1); opacity:0}}

    .wrap{position:relative; min-height:100vh; display:grid; place-items:center; padding: 40px 16px;}
    .card{position:relative; width:min(880px, 94vw); background:linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.78)); backdrop-filter: blur(8px); border:1px solid rgba(255,255,255,.6); border-radius:28px; box-shadow:0 10px 30px var(--shadow); overflow:hidden}
    .card-header{display:flex; align-items:center; gap:14px; padding:18px 20px; background:rgba(255,255,255,.65); border-bottom:1px solid rgba(0,0,0,.04)}
    .dot{width:12px;height:12px;border-radius:50%}
    .dot.r{background:#ff5f57}.dot.y{background:#febc2e}.dot.g{background:#28c840}
    .title{font-family:'Baloo 2', cursive; font-size:clamp(18px, 2.2vw, 26px)}

    .stage{position:relative; padding:28px}
    .note{font-size:clamp(16px,1.6vw,20px); line-height:1.6; text-align:center; margin:6px auto 22px; max-width:680px}

    .btn{display:inline-flex; align-items:center; gap:10px; background:linear-gradient(180deg, #ffffff, #f4f7ff); border:2px solid #d9e7ff; color:#3a5a96; padding:12px 18px; border-radius:16px; box-shadow:0 6px 0 #bdd0ff, 0 10px 20px var(--shadow); font-weight:700; text-decoration:none; cursor:pointer; transition:.18s transform, .18s box-shadow}
    .btn:hover{transform:translateY(-2px); box-shadow:0 8px 0 #bdd0ff, 0 14px 28px var(--shadow)}
    .btn:active{transform:translateY(3px); box-shadow:0 2px 0 #bdd0ff, 0 6px 14px var(--shadow)}

    .cinnabg{position:absolute; inset:0; display:grid; place-items:center; pointer-events:none}
    .cinnawrap{width:min(360px, 70vw); aspect-ratio:1/1; position:relative}
    .float{animation: bob 4s ease-in-out infinite}
    @keyframes bob{0%{transform:translateY(0)} 50%{transform:translateY(-10px)} 100%{transform:translateY(0)}}
    .earL, .earR{transform-origin: center}
    .earL{animation: flapL 2.6s ease-in-out infinite .2s}
    .earR{animation: flapR 2.6s ease-in-out infinite}
    @keyframes flapL{0%,100%{transform:rotate(0)} 50%{transform:rotate(-6deg)}}
    @keyframes flapR{0%,100%{transform:rotate(0)} 50%{transform:rotate(6deg)}}
    .blush{opacity:.7}

    .popup{position:fixed; inset:0; display:none; place-items:center; z-index:50}
    .popup.active{display:grid}
    .win{width:min(560px, 94vw); background:var(--glass); backdrop-filter: blur(12px); border:2px solid rgba(255,255,255,.9); border-radius:22px; box-shadow:0 20px 40px var(--shadow); overflow:hidden; animation: pop .22s ease-out}
    @keyframes pop{from{transform:scale(.95); opacity:0} to{transform:scale(1); opacity:1}}
    .winHead{display:flex; gap:8px; align-items:center; padding:12px 14px; background:rgba(255,255,255,.85); border-bottom:1px solid rgba(0,0,0,.04)}
    .winBody{padding:18px 20px 22px}
    .h1{font-family:'Pacifico', cursive; font-size:28px; margin:8px 0 8px; color:#3a5a96}
    .p{font-size:16px; line-height:1.8}
    .actions{display:flex; justify-content:flex-end; gap:10px; margin-top:16px}
    .chip{padding:8px 14px; border-radius:999px; border:2px solid #d9e7ff; background:#fff; font-weight:700; cursor:pointer}

    footer{padding:20px 18px 34px; text-align:center; font-size:14px; opacity:.95}
    .signature{font-family:'Pacifico', cursive; font-size:20px}
  </style>
</head>
<body>
  <div class="sky" aria-hidden="true">
    <div class="cloud small"></div>
    <div class="cloud big"></div>
  </div>

  <div class="wrap">
    <div class="card">
      <div class="card-header">
        <div class="dot r"></div><div class="dot y"></div><div class="dot g"></div>
        <div class="title">For my favorite person</div>
      </div>
      <div class="stage">
        <div class="note">I made you a tiny sky, a floating puppy, and a stack of letters. Open them whenever you want. Iâ€™m sorry and I love you.</div>
        <div class="cinnabg">
          <div class="cinnawrap float">
            <svg viewBox="0 0 300 300" width="100%" height="100%" aria-label="Cinnamoroll-inspired puppy">
              <g class="earL"><ellipse cx="60" cy="145" rx="70" ry="28" fill="#ffffff" stroke="#d7e7ff" stroke-width="3"/></g>
              <g class="earR"><ellipse cx="240" cy="145" rx="70" ry="28" fill="#ffffff" stroke="#d7e7ff" stroke-width="3"/></g>
              <ellipse cx="150" cy="140" rx="78" ry="60" fill="#ffffff" stroke="#d7e7ff" stroke-width="3"/>
              <circle cx="125" cy="140" r="6" fill="#7aaeff" />
              <circle cx="175" cy="140" r="6" fill="#7aaeff" />
              <path d="M140 155 q10 10 20 0" fill="none" stroke="#7aaeff" stroke-width="4" stroke-linecap="round"/>
              <ellipse class="blush" cx="108" cy="150" rx="10" ry="6" fill="#ffb7d5"/>
              <ellipse class="blush" cx="192" cy="150" rx="10" ry="6" fill="#ffb7d5"/>
              <ellipse cx="150" cy="195" rx="46" ry="32" fill="#ffffff" stroke="#d7e7ff" stroke-width="3"/>
              <circle cx="132" cy="210" r="6" fill="#ffffff" stroke="#d7e7ff" stroke-width="3"/>
              <circle cx="168" cy="210" r="6" fill="#ffffff" stroke="#d7e7ff" stroke-width="3"/>
            </svg>
          </div>
        </div>
        <div style="text-align:center; margin-top:10px;">
          <button class="btn" id="openLetters" aria-haspopup="dialog">Open the letters</button>
        </div>
      </div>
      <footer>
        Made with clouds, cookies, and courage â€” <span class="signature">by me, for you</span>
      </footer>
    </div>
  </div>

  <div class="popup" id="popup">
    <div class="win" role="dialog" aria-modal="true" aria-labelledby="wtitle">
      <div class="winHead">
        <div class="dot r"></div><div class="dot y"></div><div class="dot g"></div>
        <div id="wtitle" class="title">Letter <span id="idx">1</span>/<span id="total">1</span></div>
      </div>
      <div class="winBody">
        <div class="h1" id="headline">Letter</div>
        <div class="p" id="bodytext"></div>
        <div class="actions">
          <button class="chip" id="prevBtn">Back</button>
          <button class="chip" id="nextBtn">Next</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Apology letters plus extras, written in a natural human voice
    const letters = [
      {h: "I am sorry, love", p: "About the knuckle thing. I should have thought before I let someone touch me like that. I know it made you feel upset and I hate that I caused that feeling."},
      {h: "You come first", p: "You always come first to me. I should have protected what we have better. I will not let anyone cross that line again."},
      {h: "I was careless", p: "I let it happen and I regret it. I never want to make you feel small. I will do better and pay attention to what matters to you."},
      {h: "My promise to you", p: "If there is ever a doubt, I will pick you. I mean it. I want you to feel safe with me always."},
      {h: "Please forgive me", p: "I hate that I hurt you. Tell me how I can make this up to you and I will do it with all my heart."},
      {h: "Thank you for loving me", p: "Thank you for loving me even when I mess up. Your love makes me try to be better each day."},
      {h: "You are my world", p: "You are my world. I can not imagine a life without you in it. Every plan I make has you in it."},
      {h: "I think about you", p: "Every moment I think about you, sometimes until it feels unhealthy. That only shows how much you mean to me and how much of my heart you hold."},
      {h: "Silly but true", p: "Sometimes I feel like a dog that only wants food. In this case the food is you. I love you that much and I am not ashamed of it."},
      {h: "You are perfect to me", p: "I love your eyes, your lips, your laugh and everything about you. Even when you feel insecure, I see someone perfect and I will keep reminding you until you believe it."},
      // final big letter as the last item, includes paragraphs
      {h: "Always yours", p: `<p>I just want to say from the bottom of my heart that you are my whole world. I can not imagine waking up and not having you in my life. Thank you for loving me in ways I do not always deserve. Thank you for being my shelter when things feel messy.</p>
        <p>Some days I think about you so much it becomes all I can think about. Sometimes that feels a little unhealthy, but I think that only proves how deep this is. My thoughts go to your eyes, the way your lips move when you smile, the little things you do that make me fall again and again.</p>
        <p>I know I make mistakes. I know I have moments when I am careless. I am sorry for hurting you and I will work on being more thoughtful. You mean everything to me and I would move mountains to keep your heart safe.</p>
        <p>Always yours,</p>
        <p>ðŸ’Œ</p>`}
    ];

    // popup logic
    const popup = document.getElementById('popup');
    const openBtn = document.getElementById('openLetters');
    const nextBtn = document.getElementById('nextBtn');
    const prevBtn = document.getElementById('prevBtn');
    const headline = document.getElementById('headline');
    const bodytext = document.getElementById('bodytext');
    const idxEl = document.getElementById('idx');
    const totalEl = document.getElementById('total');

    let i = 0; totalEl.textContent = letters.length;

    function render(){
      const item = letters[i];
      headline.textContent = item.h;
      // allow paragraphs in last letter
      bodytext.innerHTML = item.p;
      idxEl.textContent = (i+1);
      // update button text
      if(i === letters.length - 1){ nextBtn.textContent = 'Close'; } else { nextBtn.textContent = 'Next'; }
    }

    function open(){ popup.classList.add('active'); render(); }
    function close(){ popup.classList.remove('active'); }

    openBtn.addEventListener('click', open);

    nextBtn.addEventListener('click', ()=>{
      if(i < letters.length - 1){ i = i + 1; render(); if(i === letters.length - 1){ setTimeout(() => confetti(), 120); } }
      else { close(); }
    });

    prevBtn.addEventListener('click', ()=>{ i = Math.max(0, i-1); render(); });

    popup.addEventListener('click', (e)=>{ if(e.target === popup) close(); });

    // floating sparkles & hearts from before
    function spawnFloating(){
      const sky = document.querySelector('.sky');
      if(!sky) return;
      const n = 12;
      for(let k=0;k<n;k++){
        const el = document.createElement('div');
        el.className = Math.random() > 0.5 ? 'sparkle heart' : 'sparkle';
        el.style.left = Math.random()*100 + 'vw';
        el.style.bottom = (-10 + Math.random()*20) + 'vh';
        el.style.animationDelay = (Math.random()*8)+'s';
        el.style.opacity = .5 + Math.random()*.5;
        el.style.transform = `scale(${.6+Math.random()*.9})`;
        sky.appendChild(el);
        setTimeout(()=> el.remove(), 10000);
      }
    }
    setInterval(spawnFloating, 1400);
    spawnFloating();

    // confetti for final letter
    function confetti(){
      for(let k=0;k<36;k++){
        const s = document.createElement('div');
        s.className = Math.random() > 0.5 ? 'sparkle heart' : 'sparkle';
        s.style.left = (50 + (Math.random()*30 - 15)) + 'vw';
        s.style.bottom = (30 + Math.random()*20) + 'vh';
        s.style.animationDuration = (6 + Math.random()*4) + 's';
        document.body.appendChild(s);
        setTimeout(()=> s.remove(), 11000);
      }
    }

    // accessibility
    openBtn.addEventListener('keyup', (e)=>{ if(e.key === 'Enter' || e.key === ' ') open(); });

  </script>
</body>
</html>
